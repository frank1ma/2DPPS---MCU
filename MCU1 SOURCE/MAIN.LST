C51 COMPILER V9.52.0.0   MAIN                                                              05/25/2016 19:39:12 PAGE 1   


C51 COMPILER V9.52.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN MAIN.OBJ
COMPILER INVOKED BY: D:\Keil\C51\BIN\C51.EXE MAIN.c BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          /* 
   2          ========================Ö÷»ú³ÌĞòËµÃ÷===========================
   3          ÏîÄ¿Ãû³Æ£º»ùÓÚ¼¤¹â·´À¡µÄ¶şÎ¬¾«ÃÜ¶¨Î»ÏµÍ³
   4          ³ÌĞòÃû³Æ£ºÖ÷»ú´¦Àí³ÌĞò£¨MCU1£©
   5          ³ÌĞò×÷ÓÃ£ºÍê³É¿ØÖÆÏµÍ³ÖĞÖ÷µ¥Æ¬»úµÄÍ¨Ñ¶ÓëÊı¾İ´¦Àí
   6          ³ÌĞòÓïÑÔ£ºC51
   7          ³ÌĞò×÷Õß£ºÂíÉÏ½İ£¬»úµç¹¤³ÌÑ§Ôº2012¼¶£¬ÖĞ¹ú¿óÒµ´óÑ§
   8          ³ÌĞò×¢ÊÍ£ºÂíÉÏ½İ£¬»úµç¹¤³ÌÑ§Ôº2012¼¶£¬ÖĞ¹ú¿óÒµ´óÑ§
   9          ´´½¨Ê±¼ä£º2016Äê5ÔÂ1ÈÕ
  10          ĞŞ¸ÄÊ±¼ä£»2016Äê5ÔÂ15ÈÕ
  11          ×¢ÊÍĞŞ¸Ä£º2016Äê5ÔÂ20ÈÕ
  12          ===============================================================
  13          */
  14          #include <reg52.h>    //°üº¬AT89C52Í·ÎÄ¼şÄÚÈİ
  15          #include <string.h>   //°üº¬×Ö·û´®´¦ÀíÍ·ÎÄ¼şÄÚÈİ
  16          #include <intrins.h>  //51µ¥Æ¬»ú×¨ÓÃÍ·ÎÄ¼ş
  17          
  18          //¶¨Òå²ÎÊı
  19          unsigned char code LedChar[] = { 0x3F, 0x06, 0x5B, 0x4F, 0x66, 0x6D, 0x7D,0x07,0x7F,0x6F}; //¹²Òõ¼«ÊıÂë¹ÜÊ
             -ı×Ö¶ÎÑ¡Âë
  20          unsigned char sdrq_buff[9]; // ¶¨Òå½ÓÊÕPCÇëÇó´úÂëÇø
  21          unsigned char x[9];   // x×ø±ê
  22          unsigned char y[9];   // y×ø±ê
  23          unsigned char sim_serial[5]; //Ä£Äâ´®¿Ú´úÂë´æ´¢Çø
  24          bdata unsigned char SBUF1;   //¶¨ÒåÒ»¸öÎ»²Ù×÷±äÁ¿
  25          bit rec_flag,sd_flag,sdrq_flag,save_flag; //¶¨Òå½ÓÊÕ±êÖ¾£¬·¢ËÍ±êÖ¾£¬PC»ú·¢ËÍ×ø±êÇëÇó±êÖ¾
  26          sbit TXD1 = P3^4; //¶¨ÒåÄ£ÄâÊä³ö½Å
  27          sbit RXD1 = P3^5;   //¶¨ÒåÄ£ÄâÊäÈë½Å
  28          sbit TXD2 = P3^2; //¶¨ÒåÄ£ÄâÊä³ö½Å
  29          sbit RXD2 = P3^3;   //¶¨ÒåÄ£ÄâÊäÈë½Å
  30          sbit SBUF1_bit0 = SBUF1^0;
  31          sbit SBUF1_bit1 = SBUF1^1;
  32          sbit SBUF1_bit2 = SBUF1^2;
  33          sbit SBUF1_bit3 = SBUF1^3;
  34          sbit SBUF1_bit4 = SBUF1^4;
  35          sbit SBUF1_bit5 = SBUF1^5;
  36          sbit SBUF1_bit6 = SBUF1^6;
  37          sbit SBUF1_bit7 = SBUF1^7;
  38          
  39          
  40          
  41          //º¯ÊıÔ­ĞÍÉùÃ÷
  42          void initial_ptr(void);
  43          void res_mcu1(char *,int,int);
  44          void num_disp(char *,char *);
  45          void trans_dic(char *);
  46          void delay(void);
  47          void delay_bps();
  48          unsigned char getchar2();
  49          void putchar2(unsigned char input);
  50          unsigned char getchar1();
  51          void putchar1(unsigned char input);
  52          
  53          /*
  54          ======================Ö÷º¯Êı===================================
C51 COMPILER V9.52.0.0   MAIN                                                              05/25/2016 19:39:12 PAGE 2   

  55          º¯ÊıÃû³Æ£ºmain
  56          º¯Êı²ÎÊı£ºÎŞ£¨void£©
  57          º¯Êı·µ»ØÖµ£ºÎŞ£¨void£©
  58          º¯Êı×÷ÓÃ£ºÖ÷³ÌĞòÈë¿Úº¯Êı
  59          ´´½¨Ê±¼ä£º2016Äê5ÔÂ1ÈÕ
  60          ĞŞ¸ÄÊ±¼ä£»2016Äê5ÔÂ2ÈÕ
  61          ×¢ÊÍĞŞ¸Ä£º2016Äê5ÔÂ20ÈÕ
  62          ===============================================================
  63          */
  64          void main(void)
  65          {
  66   1        unsigned int i = 0;
  67   1      
  68   1       //ÉèÖÃ¶¨Ê±Æ÷1 
  69   1       TMOD=0x20;          //T1£¬²»ÊÜINT1¿ØÖÆ(0)£¬¶¨Ê±(0)£¬¹¤×÷Ä£Ê½(10£©¼´Ä£Ê½2
  70   1       TH1=0xFD;           // ±£´æ²¨ÌØÂÊ³õÖµ9600
  71   1       TL1=0xFD;           // 8Î»¼ÆÊıÆ÷£¬×Ô¶¯×°ÔØ³õÖµ
  72   1       
  73   1       //ÉèÖÃ´®¿Ú
  74   1       SCON=0x50;          // ¹¤×÷·½Ê½1£¬ÔÊĞí½ÓÊÕ
  75   1        
  76   1       //¿ªÆô¶¨Ê±Æ÷
  77   1       TR1=1;
  78   1       
  79   1        //¿ªÆôÖĞ¶Ï
  80   1       EA=1;               // ×ÜÖĞ¶Ï¿ªÆô
  81   1       ES=1;               // ´®¿ÚÍ¨Ñ¶ÖĞ¶Ï¿ªÆô
  82   1       
  83   1       initial_ptr();      //³õÊ¼»¯²ÎÊı
  84   1       
  85   1       while(1){
  86   2         
  87   2          while(sdrq_flag==0);//µÈ´ıPC»úÇëÇó
  88   2          num_disp(x,y);
  89   2         
  90   2      
  91   2          //A001rr00  PC»úÇëÇó½¨Á¢Í¨ĞÅ
  92   2         
  93   2          while((!strcmp(sdrq_buff,"A001rr00"))&&(rec_flag==1 && sd_flag==1)) {
  94   3                   
  95   3              res_mcu1(sdrq_buff,6,0);              //×ªÖÁÓ¦´ğ´¦Àíº¯Êı                     
  96   3            }
  97   2          
  98   2          //A002rr00  PC»úÇëÇó¶Ï¿ªÍ¨ĞÅ
  99   2            
 100   2           while((!strcmp(sdrq_buff,"A002rr00"))&&(rec_flag==1 && sd_flag==1)) {
 101   3      
 102   3              res_mcu1(sdrq_buff,6,0);  
 103   3              sdrq_flag=0;             //¹Ø±ÕÖ÷»úÓëPCÍ¨ĞÅ£¬Ö÷»ú½øÈë´ı»ú×´Ì¬         
 104   3            }
 105   2          
 106   2             
 107   2           //A003rr00 PC»úÇëÇó·¢ËÍ×ø±ê
 108   2            
 109   2           while((!strcmp(sdrq_buff,"A003rr00"))&&(rec_flag==1 && sd_flag==1)) {
 110   3      
 111   3              res_mcu1(sdrq_buff,6,0);    
 112   3            }
 113   2          
 114   2           //A004rr00 PC»úÇëÇóÍ£Ö¹¶¨Î»
 115   2            
 116   2           while((!strcmp(sdrq_buff,"A004rr00"))&&(rec_flag==1 && sd_flag==1)) {
C51 COMPILER V9.52.0.0   MAIN                                                              05/25/2016 19:39:12 PAGE 3   

 117   3      
 118   3              res_mcu1(sdrq_buff,6,0);    
 119   3            }
 120   2            
 121   2           //A005rr00 PC»úÇëÇóÍ¨ĞÅ·Ö»ú1
 122   2            
 123   2           while((!strcmp(sdrq_buff,"A005rr00"))&&(rec_flag==1 && sd_flag==1)) {
 124   3      
 125   3              res_mcu1(sdrq_buff,6,0);    
 126   3            }
 127   2           //A006rr00 PC»úÇëÇóÍ¨ĞÅ·Ö»ú2
 128   2            
 129   2           while((!strcmp(sdrq_buff,"A006rr00"))&&(rec_flag==1 && sd_flag==1)) {
 130   3      
 131   3              res_mcu1(sdrq_buff,6,0);    
 132   3            }
 133   2             
 134   2           //X×ø±ê PC»úÇëÇó·¢ËÍ×ø±ê
 135   2      
 136   2          while((sdrq_buff[0]=='X')&& (rec_flag==1 && sd_flag==1)) {
 137   3            if(save_flag==0){
 138   4               trans_dic(x);        //½«x×ø±ê×ª»»ÖÁxÊı×é
 139   4               save_flag=1;
 140   4              for(i=0;i<8;i++) putchar2(sdrq_buff[i]);    
 141   4            }
 142   3              res_mcu1(sdrq_buff,8,1); 
 143   3            }
 144   2            
 145   2            //Y×ø±ê PC»úÇëÇó·¢ËÍ×ø±ê
 146   2          while((sdrq_buff[0]=='Y')&& (rec_flag==1 && sd_flag==1)) {
 147   3              if(save_flag==0){
 148   4               trans_dic(y);        //½«y×ø±ê×ª»»ÖÁyÊı×é
 149   4               save_flag=1;      
 150   4                for(i=0;i<8;i++) putchar1(sdrq_buff[i]);
 151   4      
 152   4               }
 153   3              res_mcu1(sdrq_buff,8,1);  
 154   3            }
 155   2      
 156   2         
 157   2      }
 158   1           
 159   1      }
 160          
 161          
 162          
 163          /*
 164          ======================´®¿ÚÍ¨Ñ¶ÖĞ¶Ï·şÎñº¯Êı======================
 165          º¯ÊıÃû³Æ£ºserial_int
 166          º¯Êı²ÎÊı£ºÎŞ£¨void£©
 167          º¯Êı×÷ÓÃ£º´¦Àí´®¿ÚÍ¨Ñ¶ÖĞ¶Ï·şÎñÄÚÈİ
 168          ´´½¨Ê±¼ä£º2016Äê5ÔÂ1ÈÕ
 169          ĞŞ¸ÄÊ±¼ä£»2016Äê5ÔÂ2ÈÕ
 170          ×¢ÊÍĞŞ¸Ä£º2016Äê5ÔÂ2ÈÕ
 171          ===============================================================
 172          */
 173          void serial_int(void) interrupt 4
 174          {
 175   1        static unsigned int buff_cnt;     // Îª¶ÁÈ¡buffÌá¹©¼ÆÊı
 176   1        
 177   1        //SBUF½ÓÊÜµ½ÄÚÈİ²úÉúÖĞ¶Ï
 178   1        if(RI==1){
C51 COMPILER V9.52.0.0   MAIN                                                              05/25/2016 19:39:12 PAGE 4   

 179   2          if(rec_flag==1) return;         //Èç¹û»¹ÓĞĞÅÏ¢Î´´¦Àí£¬ÔòÌø³öÖĞ¶Ï
 180   2          RI=0;                           //Çå³ıÖĞ¶Ï½ÓÊÕ±êÖ¾
 181   2          sdrq_buff[buff_cnt]= SBUF;      //¶ÁÈ¡Ò»Î»PCÇëÇó´úÂë
 182   2          buff_cnt++;                     //½ÓÊÕ¼ÆÊı¼Ó1£¬×¼±¸ÏÂÒ»Î»¶ÁÈ¡
 183   2          
 184   2          if(buff_cnt==8){                //¶ÁÂú8Î»Î»´úÂë
 185   3            if(sdrq_flag==0){       //Èç¹ûPC»úÉĞÎ´·¢ËÍÆô¶¯ÇëÇó
 186   4              
 187   4              if(!strcmp(sdrq_buff,"A001rr00")){ //ÅĞ¶ÏÊÇ·ñÎªÆô¶¯ÇëÇó
 188   5                rec_flag=1;      //½ÓÊÕÍê±Ï±êÖ¾
 189   5                sdrq_flag=1;
 190   5                buff_cnt=0;      //¼ÆÊıÇåÁã
 191   5              }
 192   4              else 
 193   4                buff_cnt=0;      //¼ÆÊıÇåÁã
 194   4            
 195   4            }
 196   3            else if(sdrq_buff[0]=='A'|| sdrq_buff[0]=='C' ||sdrq_buff[0]=='D'||sdrq_buff[0]=='X'||sdrq_buff[0]=='Y'
             -){     
 197   4                rec_flag=1;
 198   4                buff_cnt=0;
 199   4            } 
 200   3          }
 201   2          
 202   2        }
 203   1        //SBUF·¢ËÍÁËÄÚÈİ²úÉúÖĞ¶Ï
 204   1        else{
 205   2          
 206   2          TI=0;            //Çë³ı·¢ËÍÖĞ¶Ï±êÖ¾
 207   2          sd_flag=1;       //·¢ËÍÍê±Ï±êÖ¾
 208   2        }
 209   1      }
 210          
 211          /*
 212          ======================³õÊ¼»¯²ÎÊıº¯Êı============================
 213          º¯ÊıÃû³Æ£ºinitial_ptr
 214          º¯Êı²ÎÊı£ºÎŞ£¨void£©
 215          º¯Êı×÷ÓÃ£º³õÊ¼»¯¸÷Ê¹ÓÃ²ÎÊı
 216          ´´½¨Ê±¼ä£º2016Äê5ÔÂ1ÈÕ
 217          ĞŞ¸ÄÊ±¼ä£»2016Äê5ÔÂ2ÈÕ
 218          ×¢ÊÍĞŞ¸Ä£º2016Äê5ÔÂ2ÈÕ
 219          ===============================================================
 220          */
 221          void initial_ptr(void)
 222          {
 223   1       unsigned int i = 0;
 224   1       
 225   1       //³õÊ¼»¯½ÓÊÕ´úÂëÇø
 226   1       for(i=0;i<8;i++) sdrq_buff[i]=0;
 227   1       //³õÊ¼»¯±êÖ¾
 228   1       rec_flag=0;       //ÒÑ½ÓÊÕÍê±ÏµÄ±êÖ¾Çå¿Õ
 229   1       sd_flag=1;        //ÒÑ·¢ËÍÍê±ÏµÄ±êÖ¾ÖÃÎ»
 230   1       sdrq_flag=0;      //ÒÑ½ÓÊÕÇëÇó´úÂëµÄ±êÖ¾Çå¿Õ
 231   1       save_flag=0;
 232   1       
 233   1      }
 234          
 235          /*
 236          ======================Ö÷»úÓ¦´ğ´¦Àíº¯Êı==========================
 237          º¯ÊıÃû³Æ£ºres_mcu1
 238          º¯Êı²ÎÊı£ºÓ¦´ğÊı×éÃû res, ½ØÈ¡Î»Êın,ÍêÕû±êÖ¾i
 239          º¯Êı×÷ÓÃ£º´¦ÀíÀ´×ÔPCµÄÇëÇó£¬Éú³ÉÓ¦´ğ¡£
C51 COMPILER V9.52.0.0   MAIN                                                              05/25/2016 19:39:12 PAGE 5   

 240          ´´½¨Ê±¼ä£º2016Äê5ÔÂ1ÈÕ
 241          ĞŞ¸ÄÊ±¼ä£»2016Äê5ÔÂ2ÈÕ
 242          ×¢ÊÍĞŞ¸Ä£º2016Äê5ÔÂ20ÈÕ
 243          ===============================================================
 244          */
 245          void res_mcu1(char* res,int n,int i)
 246          { 
 247   1        static unsigned int cnt=1;
 248   1            if(cnt==1){
 249   2            SBUF = 'B';   //±íÃ÷À´×ÔÖ÷»úµÄÍ¨Ñ¶
 250   2            while(!TI); }
 251   1           SBUF = res[cnt];
 252   1            while(!TI);       //Õâ¾ä»°Ì«¹Ø¼üÁË£¬SBUF·¢ËÍĞèÒªÊ±¼ä£¬Ò»¶¨ÒªµÈTIÇå0²ÅÄÜÈ·¶¨SBUFÒÑ¾­·¢ËÍÍê±Ï
 253   1            cnt++;            //·¢ËÍ¼ÆÊı
 254   1            if(cnt==n && i==0){                
 255   2             rec_flag= 0;    //½ÓÊÕ´¦ÀíÍê±Ï 
 256   2             sd_flag=0;      //ÖØÖÃ·¢ËÍ±êÖ¾
 257   2             cnt=1;          //ÖØÖÃ¼ÆÊı
 258   2             SBUF = '1';    //½áÎ²¼ÓÉÏ1´ú±íÍ¬Òâ
 259   2             while(!TI); 
 260   2             SBUF = '1'; 
 261   2             while(!TI);        
 262   2            }
 263   1            else if(cnt==n && i==1){               
 264   2             rec_flag= 0;    //½ÓÊÕ´¦ÀíÍê±Ï
 265   2             save_flag=0;
 266   2             cnt=1;  
 267   2            }                //ÖØÖÃ¼ÆÊı  
 268   1      }
 269          
 270          
 271          
 272          /*
 273          ======================ÊıÂë¹ÜÏÔÊ¾º¯Êı==========================
 274          º¯ÊıÃû³Æ£ºnum_disp
 275          º¯Êı²ÎÊı£º´¦ÀíÊı×éarr
 276          º¯Êı×÷ÓÃ£º½«X×ø±êºÍY×ø±êÏÔÊ¾³öÀ´
 277          ´´½¨Ê±¼ä£º2016Äê5ÔÂ2ÈÕ
 278          ĞŞ¸ÄÊ±¼ä£»2016Äê5ÔÂ3ÈÕ
 279          ×¢ÊÍĞŞ¸Ä£º2016Äê5ÔÂ20ÈÕ
 280          ===============================================================
 281          */
 282          void num_disp(char *arr1,char *arr2)
 283          {
 284   1       P0=LedChar[arr1[1]];  //ÊıÂë¹ÜÑ¡¶Î
 285   1       P2=LedChar[arr2[1]]; 
 286   1       P1=0x01;              //ÊıÂë¹ÜÑ¡Î»
 287   1       delay();
 288   1       P0=0x00;              //ÏûÒş
 289   1       P2=0x00;
 290   1         
 291   1       P0=LedChar[arr1[2]];
 292   1       P2=LedChar[arr2[2]];
 293   1       P1=0x01<<1;
 294   1       delay();
 295   1       P0=0x00;
 296   1       P2=0x00;
 297   1       
 298   1       P0=LedChar[arr1[3]];
 299   1       P2=LedChar[arr2[3]];
 300   1       P1=0x01<<2;
 301   1       delay();
C51 COMPILER V9.52.0.0   MAIN                                                              05/25/2016 19:39:12 PAGE 6   

 302   1       P0=0x00;
 303   1       P2=0x00;
 304   1        
 305   1       P0=LedChar[arr1[4]]+0x80;  //0x80ÎªĞ¡Êıµã
 306   1       P2=LedChar[arr2[4]]+0x80;
 307   1       P1=0x01<<3;
 308   1       delay();
 309   1       P0=0x00;
 310   1       P2=0x00;;
 311   1       
 312   1       P0=LedChar[arr1[5]];
 313   1       P2=LedChar[arr2[5]];
 314   1       P1=0x01<<4;
 315   1       delay();
 316   1       P0=0x00;
 317   1       P2=0x00;
 318   1       
 319   1       P0=LedChar[arr1[6]];
 320   1       P2=LedChar[arr2[6]];
 321   1       P1=0x01<<5;
 322   1       delay();
 323   1       P0=0x00;
 324   1       P2=0x00;
 325   1       
 326   1       P0=LedChar[arr1[7]];
 327   1       P2=LedChar[arr2[7]];
 328   1       P1=0x01<<6;
 329   1       delay();
 330   1       P0=0x00;
 331   1       P2=0x00;
 332   1      
 333   1      }
 334          /*
 335          ======================×Öµäº¯Êı=================================
 336          º¯ÊıÃû³Æ£ºtrans_dic
 337          º¯Êı²ÎÊı£º×ª»»Êı×éarr
 338          º¯Êı×÷ÓÃ£º½«X×ø±êºÍY×ø±ê´Ósdrq_buffÖĞ×ª»»ÖÁ¶ÔÓ¦Êı×éÖĞ
 339          ´´½¨Ê±¼ä£º2016Äê5ÔÂ4ÈÕ
 340          ĞŞ¸ÄÊ±¼ä£»2016Äê5ÔÂ4ÈÕ
 341          ×¢ÊÍĞŞ¸Ä£º2016Äê5ÔÂ20ÈÕ
 342          ===============================================================
 343          */
 344          void trans_dic(char *arr)
 345          {
 346   1       unsigned int i;
 347   1       unsigned char k; 
 348   1        for(i=0;i<8;i++)
 349   1        {
 350   2         k=sdrq_buff[i];
 351   2         
 352   2        switch(k){
 353   3          case 'X':
 354   3            arr[i]='X';
 355   3            break;
 356   3          case 'Y':
 357   3            arr[i]='Y';
 358   3            break;
 359   3          case '0':
 360   3            arr[i]=0;
 361   3            break;
 362   3          case '1':
 363   3            arr[i]=1;
C51 COMPILER V9.52.0.0   MAIN                                                              05/25/2016 19:39:12 PAGE 7   

 364   3            break;
 365   3          case '2':
 366   3            arr[i]=2;
 367   3            break;
 368   3          case '3':
 369   3            arr[i]=3;
 370   3            break;
 371   3          case '4':
 372   3            arr[i]=4;
 373   3            break;
 374   3          case '5':
 375   3            arr[i]=5;
 376   3            break;
 377   3          case '6':
 378   3            arr[i]=6;
 379   3            break;
 380   3          case '7':
 381   3            arr[i]=7;
 382   3            break;
 383   3          case '8':
 384   3            arr[i]=8;
 385   3            break;
 386   3          case '9':
 387   3            arr[i]=9;
 388   3            break;
 389   3        }
 390   2      
 391   2        }
 392   1      }
 393          
 394          
 395          /*
 396          ======================ÑÓÊ±º¯Êı=================================
 397          º¯ÊıÃû³Æ£ºdelay
 398          º¯Êı×÷ÓÃ£ºÈí¼şÄ£ÄâÑÓÊ±
 399          ´´½¨Ê±¼ä£º2016Äê5ÔÂ4ÈÕ
 400          ĞŞ¸ÄÊ±¼ä£»2016Äê5ÔÂ4ÈÕ
 401          ×¢ÊÍĞŞ¸Ä£º2016Äê5ÔÂ4ÈÕ
 402          ===============================================================
 403          */
 404          void delay(void)
 405          
 406          {
 407   1              unsigned int i,j;
 408   1        i=1;
 409   1        while(i--){
 410   2          
 411   2               for(j=0;j<125;j++);
 412   2        }
 413   1      
 414   1      }
 415          /*
 416          ======================I/0Ä£Äâ´®¿Úº¯Êı=================================
 417          º¯ÊıÃû³Æ£ºgetchar2()ºÍ putchar2()
 418          º¯Êı×÷ÓÃ£ºÄ£ÄâI/O·¢ËÍ´®¿ÚÊı¾İ
 419          ´´½¨Ê±¼ä£º2016Äê5ÔÂ4ÈÕ
 420          ĞŞ¸ÄÊ±¼ä£»2016Äê5ÔÂ10ÈÕ
 421          ×¢ÊÍĞŞ¸Ä£º2016Äê5ÔÂ20ÈÕ
 422          ===============================================================
 423          */
 424          unsigned char getchar2()  //Ä£Äâ½ÓÊÕÒ»¸ö×Ö½ÚÊı¾İ
 425          {
C51 COMPILER V9.52.0.0   MAIN                                                              05/25/2016 19:39:12 PAGE 8   

 426   1        while (RXD1);
 427   1          _nop_();_nop_();_nop_();_nop_();_nop_();_nop_();_nop_();_nop_();
 428   1          delay_bps();
 429   1          SBUF1_bit0 = RXD1; //0       
 430   1          delay_bps();
 431   1          SBUF1_bit1 = RXD1; //1       
 432   1          delay_bps();
 433   1          SBUF1_bit2 = RXD1; //2       
 434   1          delay_bps();
 435   1          SBUF1_bit3 = RXD1; //3       
 436   1          delay_bps();
 437   1          SBUF1_bit4 = RXD1; //4       
 438   1          delay_bps();
 439   1          SBUF1_bit5 = RXD1; //5       
 440   1          delay_bps();
 441   1          SBUF1_bit6 = RXD1; //6       
 442   1          delay_bps();
 443   1          SBUF1_bit7 = RXD1; //7       
 444   1        delay_bps();
 445   1          return(SBUF1) ;      //·µ»Ø¶ÁÈ¡µÄÊı¾İ
 446   1      }
 447          
 448          void putchar2(unsigned char input)    //Ä£Äâ·¢ËÍÒ»¸ö×Ö½ÚÊı¾İ
 449          {
 450   1          SBUF1 = input;
 451   1          TXD1 = 0;  //ÆğÊ¼Î»
 452   1          delay_bps();    
 453   1          TXD1 = SBUF1_bit0;  //0
 454   1          delay_bps();    
 455   1          TXD1 = SBUF1_bit1;  //1
 456   1          delay_bps();    
 457   1          TXD1 = SBUF1_bit2;  //2
 458   1          delay_bps();    
 459   1          TXD1 = SBUF1_bit3;  //3
 460   1          delay_bps();    
 461   1          TXD1 = SBUF1_bit4;  //4
 462   1          delay_bps();    
 463   1          TXD1 = SBUF1_bit5;  //5
 464   1          delay_bps();    
 465   1          TXD1 = SBUF1_bit6;  //6
 466   1          delay_bps();    
 467   1          TXD1 = SBUF1_bit7;  //7
 468   1          delay_bps();    
 469   1          TXD1 = 1;       //Í£Ö¹Î»
 470   1          delay_bps();    
 471   1      }
 472          
 473          unsigned char getchar1()  //Ä£Äâ½ÓÊÕÒ»¸ö×Ö½ÚÊı¾İ
 474          {
 475   1        while (RXD2);
 476   1          _nop_();_nop_();_nop_();_nop_();_nop_();_nop_();_nop_();_nop_();
 477   1          delay_bps();
 478   1          SBUF1_bit0 = RXD2; //0       
 479   1          delay_bps();
 480   1          SBUF1_bit1 = RXD2; //1       
 481   1          delay_bps();
 482   1          SBUF1_bit2 = RXD2; //2       
 483   1          delay_bps();
 484   1          SBUF1_bit3 = RXD2; //3       
 485   1          delay_bps();
 486   1          SBUF1_bit4 = RXD2; //4       
 487   1          delay_bps();
C51 COMPILER V9.52.0.0   MAIN                                                              05/25/2016 19:39:12 PAGE 9   

 488   1          SBUF1_bit5 = RXD2; //5       
 489   1          delay_bps();
 490   1          SBUF1_bit6 = RXD2; //6       
 491   1          delay_bps();
 492   1          SBUF1_bit7 = RXD2; //7       
 493   1        delay_bps();
 494   1          return(SBUF1) ;      //·µ»Ø¶ÁÈ¡µÄÊı¾İ
 495   1      }
 496          
 497          void putchar1(unsigned char input)    //Ä£Äâ·¢ËÍÒ»¸ö×Ö½ÚÊı¾İ
 498          {
 499   1          SBUF1 = input;
 500   1          TXD2 = 0;  //ÆğÊ¼Î»
 501   1          delay_bps();    
 502   1          TXD2 = SBUF1_bit0;  //0
 503   1          delay_bps();    
 504   1          TXD2 = SBUF1_bit1;  //1
 505   1          delay_bps();    
 506   1          TXD2 = SBUF1_bit2;  //2
 507   1          delay_bps();    
 508   1          TXD2 = SBUF1_bit3;  //3
 509   1          delay_bps();    
 510   1          TXD2 = SBUF1_bit4;  //4
 511   1          delay_bps();    
 512   1          TXD2 = SBUF1_bit5;  //5
 513   1          delay_bps();    
 514   1          TXD2 = SBUF1_bit6;  //6
 515   1          delay_bps();    
 516   1          TXD2 = SBUF1_bit7;  //7
 517   1          delay_bps();    
 518   1          TXD2 = 1;       //Í£Ö¹Î»
 519   1          delay_bps();    
 520   1      }
 521           
 522          void delay_bps() {
 523   1         unsigned char i; 
 524   1         for (i = 0; i < 29; i++); 
 525   1            _nop_();
 526   1            _nop_();
 527   1         } //²¨ÌØÂÊ9600 Ä£ÄâÒ»¸ö9600²¨ÌØÂÊ
 528          
 529          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   1809    ----
   CONSTANT SIZE    =     64    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     37      20
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      4    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
